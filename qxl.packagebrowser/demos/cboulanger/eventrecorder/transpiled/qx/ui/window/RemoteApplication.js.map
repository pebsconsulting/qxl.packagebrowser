{
  "version": 3,
  "sources": [
    "/home/runner/work/qxl.packagebrowser/qxl.packagebrowser/packages/qx_packages/cboulanger_eventrecorder_v0_18_0/source/class/qx/ui/window/RemoteApplication.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "data",
    "IProxy",
    "include",
    "MRemoteBinding",
    "construct",
    "uri",
    "config",
    "name",
    "__uri",
    "url",
    "_computeApplicationUrl",
    "util",
    "Validate",
    "checkUrl",
    "window_name",
    "_createUuid",
    "_computeWindowConfig",
    "__window",
    "bom",
    "Window",
    "open",
    "window",
    "addEventListener",
    "isClosed",
    "close",
    "stopPropertySync",
    "transport",
    "io",
    "channel",
    "PostMessage",
    "__channel",
    "Channel",
    "members",
    "defaultConfig",
    "_getWindowDefaultConfig",
    "key",
    "undefined",
    "getWindow",
    "width",
    "height",
    "dependent",
    "menubar",
    "status",
    "scrollbars",
    "toolbar",
    "startsWith",
    "appUrl",
    "Uri",
    "parseUri",
    "location",
    "href",
    "parentDir",
    "protocol",
    "authority",
    "directory",
    "split",
    "slice",
    "join",
    "startPropertySync",
    "options",
    "_syncProperties",
    "getUri",
    "focus",
    "destruct",
    "_disposeObjects",
    "ui",
    "RemoteApplication"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2018 The authors\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Christian Boulanger (cboulanger)\n\n************************************************************************ */\n\n/**\n * A proxy for an application running in a different browser window or tab\n *\n */\nqx.Class.define(\"qx.ui.window.RemoteApplication\", {\n  extend: qx.core.Object,\n  implement: qx.data.IProxy,\n  include: [qx.data.MRemoteBinding],\n\n  /**\n   * Constructor\n   * @param uri {String}\n   *    The uri of the remote web application, usually a URL, can also be the\n   *    name of a subdirectory of the parent directory of the running\n   *    application.\n   * @param config {Object}\n   *    Window configuration, see {@link  qx.bom.Window#open}.\n   * @param name {String}\n   *    An option name/id of thw window, which must be unique\n   */\n  construct: function(uri, config, name) {\n    this.base(arguments);\n    this.__uri = uri;\n    var url = this._computeApplicationUrl(uri);\n    qx.util.Validate.checkUrl(url);\n    var window_name = name || \"window-\" + this._createUuid();\n    config = this._computeWindowConfig(config);\n    this.__window = qx.bom.Window.open(url, window_name, config);\n    // close popup window when main application unloads\n    window.addEventListener(\"beforeunload\", () => {\n      if (!this.isClosed()) {\n        this.close();\n      }\n      this.stopPropertySync();\n      this.__window = null;\n    });\n    var transport = new qx.io.channel.transport.PostMessage(this.__window, window_name);\n    this.__channel = new qx.io.channel.Channel(transport);\n  },\n\n  members: {\n    __channel: null,\n    __window: null,\n\n    /**\n     * Returns the map that is passed into {@link qx.bom.Window#open}, using\n     * default values and overriding them with values in the map.\n     * @param config {Object|undefined}\n     * @return {Object}\n     */\n    _computeWindowConfig(config={}) {\n      var defaultConfig = this._getWindowDefaultConfig();\n      for (var key in defaultConfig) {\n        if (config[key] === undefined) {\n          config[key] = defaultConfig[key];\n        }\n      }\n      return config;\n    },\n\n    /**\n     * Exposes the internal window object\n     * @return {Window}\n     */\n    getWindow: function() {\n      return this.__window;\n    },\n\n    /**\n     * Returns default values for {@link qx.bom.Window#open}. Can be overridden\n     * to set other values.\n     * @return {Object}\n     */\n    _getWindowDefaultConfig() {\n      return {\n        width: 800,\n        height: 600,\n        dependent: true,\n        menubar: false,\n        status: false,\n        scrollbars: false,\n        toolbar: false\n      };\n    },\n\n    /**\n     * Given an identifier (either a complete URL or an application name as stated\n     * in compile.json), return the URL to the application.\n     * @param uri\n     * @return {String}\n     * @private\n     */\n    _computeApplicationUrl(uri) {\n      if (!uri.startsWith(\"http\")) {\n        // if this isn't a valid URL, prepend parente directory\n        var appUrl = qx.util.Uri.parseUri(location.href);\n        var parentDir = appUrl.protocol + \"://\" + appUrl.authority + appUrl.directory.split(\"/\").slice(0, -2).join(\"/\");\n        uri = parentDir + \"/\" + uri;\n      }\n      return uri;\n    },\n\n    /**\n     * Interface method, see {@link qx.data.IProxy#startPropertySync}\n     * @param options see {@link qx.data.IProxy#_syncProperties}\n     */\n    startPropertySync: function(options) {\n      this._syncProperties(this.__channel, options);\n    },\n\n    /**\n     * Returns the uri of the remote application\n     * @return {String}\n     */\n    getUri: function() {\n      return this.__uri;\n    },\n\n    open: function() {\n      this.__window.focus();\n    },\n\n    close: function () {\n      this.__window.close();\n    },\n\n    isClosed: function () {\n      return qx.bom.Window.isClosed(this.__window);\n    }\n  },\n\n  destruct: function () {\n    this.base(arguments);\n    if (!qx.bom.Window.isClosed(this.__window)) {\n      this.__window.close();\n    }\n    this._disposeObjects(\"__window\", \"__channel\");\n  }\n});\n"
  ]
}