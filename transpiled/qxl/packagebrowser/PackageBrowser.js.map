{
  "version": 3,
  "sources": [
    "/home/runner/work/qxl.packagebrowser/qxl.packagebrowser/source/class/qxl/packagebrowser/PackageBrowser.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "container",
    "Composite",
    "statics",
    "icons",
    "owner",
    "repository",
    "folder",
    "library",
    "homepage",
    "readme",
    "sourcecode",
    "demo",
    "problems",
    "releases",
    "construct",
    "qxShowdown",
    "Load",
    "__menuItemStore",
    "welcomeUrl",
    "util",
    "ResourceManager",
    "getInstance",
    "toUri",
    "defaultUrl",
    "layout",
    "VBox",
    "setLayout",
    "add",
    "_createHeader",
    "widgets",
    "tests",
    "__makeCommands",
    "__menuBar",
    "__makeToolBar",
    "mainsplit",
    "splitpane",
    "Pane",
    "setAppearance",
    "infosplit",
    "setDecorator",
    "_infosplit",
    "flex",
    "leftComposite",
    "_leftComposite",
    "searchComposite",
    "HBox",
    "searchIcon",
    "basic",
    "Image",
    "stf",
    "_searchTextField",
    "form",
    "TextField",
    "setLiveUpdate",
    "setPlaceholder",
    "filterTimer",
    "event",
    "Timer",
    "addListener",
    "ev",
    "searchTxt",
    "getValue",
    "filter",
    "_history",
    "setState",
    "stop",
    "e",
    "_clearIcon",
    "setEnabled",
    "Boolean",
    "getData",
    "restart",
    "clearIcon",
    "setMarginTop",
    "setValue",
    "_tree",
    "__makeTree",
    "__makeUrlMenu",
    "_demoView",
    "__makeDemoView",
    "bom",
    "History",
    "state",
    "replace",
    "startsWith",
    "slice",
    "_currentSample",
    "updateIframe",
    "__menuElements",
    "__ownWindowButton",
    "__viewPart",
    "__infoWindow",
    "qxl",
    "packagebrowser",
    "InfoWindow",
    "tr",
    "setAutoCenter",
    "members",
    "_iframe",
    "__logDone",
    "_versionFilter",
    "_navPart",
    "__overflowMenu",
    "__menuViewRadioGroup",
    "_urlWindow",
    "__viewGroup",
    "__selectedModelNode",
    "_cmdRunSample",
    "command",
    "Command",
    "runSample",
    "_cmdPrevSample",
    "playPrev",
    "_cmdNextSample",
    "playNext",
    "_cmdSampleInOwnWindow",
    "__openWindow",
    "sampUrl",
    "getSource",
    "window",
    "open",
    "bar",
    "toolbar",
    "ToolBar",
    "prevNextPart",
    "Part",
    "prevbutt",
    "Button",
    "setToolTipText",
    "_prevButton",
    "nextbutt",
    "_nextButton",
    "ownWinBtn",
    "docButton",
    "viewPart",
    "addSpacer",
    "setOverflowHandling",
    "chevron",
    "MenuButton",
    "setOverflowIndicator",
    "setRemovePriority",
    "menu",
    "Menu",
    "setMenu",
    "_onHideItem",
    "_onShowItem",
    "partItem",
    "menuItems",
    "_getMenuItems",
    "i",
    "l",
    "length",
    "setVisibility",
    "cachedItems",
    "partButtons",
    "getChildren",
    "separator",
    "firstGroup",
    "toHashCode",
    "Separator",
    "addBefore",
    "push",
    "getVisibility",
    "cachedItem",
    "RadioButton",
    "getLabel",
    "getToolTipText",
    "getEnabled",
    "setUserData",
    "getUserData",
    "setModel",
    "getModel",
    "bind",
    "RadioGroup",
    "setAllowEmptySelection",
    "translate",
    "getIcon",
    "getCommand",
    "getMenu",
    "getChildControl",
    "setRich",
    "setTextColor",
    "getTextColor",
    "listeners",
    "Registration",
    "getManager",
    "getListeners",
    "j",
    "k",
    "lang",
    "Function",
    "handler",
    "context",
    "CheckBox",
    "iframe",
    "embed",
    "Iframe",
    "set",
    "nativeContextMenu",
    "__onIframeLoaded",
    "tree1",
    "tree",
    "Tree",
    "root",
    "TreeFolder",
    "setRoot",
    "__onTreeChangeSelection",
    "once",
    "urlWindow",
    "Window",
    "setAllowMaximize",
    "setAllowMinimize",
    "urlLabel",
    "Label",
    "setSelectable",
    "setNativeContextMenu",
    "left",
    "Math",
    "ceil",
    "Viewport",
    "getWidth",
    "top",
    "getHeight",
    "moveTo",
    "getApplicationRoot",
    "copyButton",
    "treeNode",
    "getSelection",
    "modelNode",
    "demoName",
    "getFullName",
    "core",
    "Environment",
    "get",
    "fullUrl",
    "location",
    "protocol",
    "host",
    "pathname",
    "encodeURIComponent",
    "setContextMenu",
    "leftReloadTree",
    "_sampleToTreeNodeMap",
    "_initialNode",
    "getState",
    "buildSubTree",
    "widgetR",
    "modelR",
    "children",
    "t",
    "currNode",
    "fullPath",
    "hasChildren",
    "label",
    "tags",
    "description",
    "info",
    "keywords",
    "Type",
    "isArray",
    "concat",
    "authors",
    "TreeFile",
    "type",
    "pwd",
    "join",
    "setOpen",
    "data",
    "setIcon",
    "widgetLinkFull",
    "ttree",
    "getRoot",
    "setSelection",
    "value",
    "url",
    "getTree",
    "AbstractTreeItem",
    "error",
    "html",
    "__getApplicationsHtml",
    "__getLibraryInfoHtml",
    "__getReadmeHtml",
    "uri",
    "__getReleasesHtml",
    "__getProblemsHtml",
    "Array",
    "origin",
    "$$appRoot",
    "__getOpenLinkHtml",
    "__loadIframe",
    "getDocument",
    "body",
    "innerHTML",
    "disableMenuButtons",
    "enableMenuButtons",
    "_currentSampleUrl",
    "Promise",
    "resolve",
    "reject",
    "Popup",
    "useIcon",
    "display",
    "hide",
    "getWindow",
    "setSource",
    "lib",
    "manifest",
    "req",
    "requires",
    "repo_url",
    "split",
    "v",
    "createTableRow",
    "args",
    "map",
    "arg",
    "createAnchor",
    "href",
    "linktext",
    "target",
    "dependencies",
    "Object",
    "entries",
    "pkg_uri",
    "range",
    "name",
    "summary",
    "version",
    "provides",
    "namespace",
    "__getAuthorsHtml",
    "__getNewIssueUrl",
    "__getKeywordssHtml",
    "author",
    "githubUser",
    "img_src",
    "newIssue",
    "compilation_log",
    "lineStartsWith",
    "log",
    "line",
    "trim",
    "some",
    "string",
    "migrateMsg",
    "migrateSignal",
    "includes",
    "newIssueBody",
    "hash",
    "newPackageIssueUrl",
    "newCompilerIssueUrl",
    "explanations",
    "regex",
    "explainMessages",
    "reduce",
    "result",
    "explanation",
    "find",
    "expl",
    "match",
    "appsHtml",
    "childNode",
    "apiUrl",
    "fetch",
    "json",
    "content",
    "markdown",
    "atob",
    "converter",
    "showdown",
    "Converter",
    "makeHtml",
    "attr",
    "urlFragment",
    "urlPrefix",
    "message",
    "oneDay",
    "today",
    "Date",
    "release",
    "draft",
    "datePublished",
    "published_at",
    "daysSincePublished",
    "round",
    "abs",
    "getTime",
    "setLabel",
    "tagHtml",
    "tag_name",
    "titleSuffixes",
    "prerelease",
    "latestCompatible",
    "latestVersion",
    "div",
    "document",
    "createElement",
    "innerText",
    "html_url",
    "toLocaleDateString",
    "toLocaleTimeString",
    "term",
    "searchRegExp",
    "RegExp",
    "items",
    "getItems",
    "parent",
    "getParent",
    "inTags",
    "search",
    "show",
    "exclude",
    "folders",
    "selection",
    "dataLoader",
    "io",
    "request",
    "Xhr",
    "setTimeout",
    "evt",
    "getTarget",
    "getResponse",
    "alert",
    "treeData",
    "eval",
    "TreeDataHandler",
    "send",
    "currSamp",
    "otherSamp",
    "getPreviousNodeOf",
    "isVisible",
    "candidate",
    "candidate2",
    "getNextNodeOf",
    "elements",
    "header",
    "title",
    "versionlabel",
    "VersionLabel",
    "setFont",
    "Spacer",
    "destruct",
    "logelem",
    "_disposeObjects",
    "PackageBrowser"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2007-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Thomas Herchenroeder (thron7)\n     * Fabian Jakobs (fjakobs)\n     * Martin Wittemann (martinwittemann)\n     * Jonathan Wei (jonathan_rass)\n     * Christian Boulanger (cboulanger)\n\n************************************************************************ */\n\n\n/**\n * The GUI + business logic of the package browser.\n *\n * @asset(qx/icon/Tango/16/actions/edit-find.png)\n * @asset(qx/icon/Tango/16/actions/edit-delete.png)\n * @asset(qx/icon/Tango/16/actions/document-properties.png)\n * @asset(qx/icon/Tango/16/actions/go-home.png)\n * @asset(qx/icon/Tango/16/apps/internet-web-browser.png)\n * @asset(qx/icon/Tango/16/apps/utilities-archiver.png)\n * @asset(qx/icon/Tango/16/apps/preferences-clock.png)\n * @asset(qx/icon/Tango/16/emblems/emblem-important.png)\n * @asset(qx/icon/Tango/16/mimetypes/text-plain.png)\n * @asset(qx/icon/Tango/16/mimetypes/archive.png)\n * @asset(qx/icon/Tango/16/places/folder.png)\n * @asset(qx/icon/Tango/16/places/folder-open.png)\n * @asset(qx/icon/Tango/16/status/dialog-information.png)\n * @asset(qx/icon/Tango/16/status/mail-unread.png)\n * @asset(qx/icon/Tango/22/actions/media-playback-start.png)\n * @asset(qx/icon/Tango/22/actions/go-previous.png)\n * @asset(qx/icon/Tango/22/actions/go-next.png)\n * @asset(qx/icon/Tango/22/actions/edit-redo.png)\n * @asset(qx/icon/Tango/22/actions/edit-clear.png)\n * @asset(qx/icon/Tango/22/actions/application-exit.png)\n * @asset(qx/icon/Tango/22/apps/utilities-color-chooser.png)\n * @asset(qx/icon/Tango/22/apps/office-spreadsheet.png)\n * @asset(qx/icon/Tango/22/apps/utilities-log-viewer.png)\n * @asset(qx/icon/Tango/22/apps/internet-web-browser.png)\n * @asset(qx/icon/Tango/22/mimetypes/executable.png)\n * @asset(qx/icon/Tango/22/actions/help-contents.png)\n * @asset(qx/icon/Tango/22/actions/help-about.png)\n * @asset(qx/icon/Tango/22/actions/media-seek-forward.png)\n * @asset(qx/icon/Tango/22/mimetypes/text-html.png)\n * @asset(qxl/packagebrowser/icon/github-16x16.png)\n *\n * @ignore(location.*)\n * @ignore(showdown)\n * @ignore(qx.$$appRoot)\n */\n/* global showdown */\nqx.Class.define(\"qxl.packagebrowser.PackageBrowser\", {\n  extend: qx.ui.container.Composite,\n\n  statics: {\n    icons: {\n      owner: \"qxl/packagebrowser/icon/github-16x16.png\",\n      repository: \"qx/icon/Tango/16/apps/utilities-archiver.png\",\n      folder: \"qx/icon/Tango/16/mimetypes/archive.png\",\n      library: \"qx/icon/Tango/16/status/dialog-information.png\",\n      homepage: \"qx/icon/Tango/16/actions/go-home.png\",\n      readme: \"qx/icon/Tango/16/mimetypes/text-plain.png\",\n      sourcecode: \"qx/icon/Tango/16/actions/document-properties.png\",\n      demo: \"qx/icon/Tango/16/apps/internet-web-browser.png\",\n      problems: \"qx/icon/Tango/16/emblems/emblem-important.png\",\n      releases: \"qx/icon/Tango/16/apps/preferences-clock.png\"\n    }\n  },\n\n  construct: function () {\n    qxShowdown.Load;\n    this.base(arguments);\n\n    this.__menuItemStore = {};\n    this.welcomeUrl = qx.util.ResourceManager.getInstance().toUri(\"qxl/packagebrowser/welcome.html\");\n    this.defaultUrl = qx.util.ResourceManager.getInstance().toUri(\"qxl/packagebrowser/default.html\");\n\n    // Configure layout\n    var layout = new qx.ui.layout.VBox();\n    this.setLayout(layout);\n\n    // Header\n    this.add(this._createHeader());\n\n    // Data\n    this.widgets = {};\n    this.tests = {};\n\n    // Commands & Menu Bar\n    this.__makeCommands();\n    this.__menuBar = this.__makeToolBar();\n    this.add(this.__menuBar);\n\n    // Main Split Pane\n    var mainsplit = new qx.ui.splitpane.Pane(\"horizontal\");\n    mainsplit.setAppearance(\"app-splitpane\");\n    this.mainsplit = mainsplit;\n\n    var infosplit = new qx.ui.splitpane.Pane(\"horizontal\");\n    infosplit.setDecorator(null);\n    this._infosplit = infosplit;\n\n    this.add(mainsplit, {flex: 1});\n\n    // tree side\n    var leftComposite = this._leftComposite = new qx.ui.container.Composite();\n    leftComposite.setLayout(new qx.ui.layout.VBox(3));\n    mainsplit.add(leftComposite, 0);\n\n    // search\n    var searchComposite = new qx.ui.container.Composite();\n    searchComposite.setLayout(new qx.ui.layout.HBox(3));\n    searchComposite.setAppearance(\"textfield\");\n    leftComposite.add(searchComposite);\n\n    var searchIcon = new qx.ui.basic.Image(\"icon/16/actions/edit-find.png\");\n    searchComposite.add(searchIcon);\n\n    let stf = this._searchTextField = new qx.ui.form.TextField();\n    stf.setLiveUpdate(true);\n    stf.setAppearance(\"widget\");\n    stf.setPlaceholder(\"Filter...\");\n\n    var filterTimer = new qx.event.Timer(500);\n    filterTimer.addListener(\"interval\", function (ev) {\n      let searchTxt = this._searchTextField.getValue();\n      this.filter(searchTxt);\n      this._history.setState(\"filter~\" + searchTxt);\n      filterTimer.stop();\n    }, this);\n\n    this._searchTextField.addListener(\"changeValue\", function (e) {\n      this._clearIcon.setEnabled(Boolean(e.getData()));\n      filterTimer.restart();\n    }, this);\n\n    searchComposite.add(this._searchTextField, {flex: 1});\n\n    // clear\n    let clearIcon = this._clearIcon = new qx.ui.basic.Image(\"qx/icon/Tango/16/actions/edit-delete.png\");\n    clearIcon.setMarginTop(3);\n    clearIcon.setEnabled(false);\n    clearIcon.addListener(\"tap\", () => this._searchTextField.setValue(\"\"));\n    searchComposite.add(clearIcon);\n\n    mainsplit.add(infosplit, 1);\n    this._tree = this.__makeTree();\n    leftComposite.add(this._tree, {flex: 1});\n    this.__makeUrlMenu();\n\n    this._demoView = this.__makeDemoView();\n    infosplit.add(this._demoView, 2);\n\n    // Back button and bookmark support\n    this._history = qx.bom.History.getInstance();\n    this._history.addListener(\"changeState\", function (e) {\n      var state = e.getData().replace(/~/g, \"/\");\n      if (state.startsWith(\"filter/\")) {\n        this._searchTextField.setValue(state.slice(7));\n        return;\n      }\n      if (this._currentSample !== state) {\n        this.updateIframe(state);\n      }\n    }, this);\n\n    this.__menuElements = [this.__ownWindowButton, this.__viewPart];\n    this.__infoWindow = new qxl.packagebrowser.InfoWindow(this.tr(\"Info\"));\n    this.__infoWindow.setAutoCenter(true);\n  },\n\n  members: {\n    // ------------------------------------------------------------------------\n    //   CONSTRUCTOR HELPERS\n    // ------------------------------------------------------------------------\n\n    _iframe: null,\n    __logDone: null,\n    _tree: null,\n    _searchTextField: null,\n    __menuElements: null,\n    _versionFilter: null,\n    _navPart: null,\n    __ownWindowButton: null,\n    __viewPart: null,\n    __menuBar: null,\n    _leftComposite: null,\n    _infosplit: null,\n    _demoView: null,\n    __overflowMenu: null,\n    __menuItemStore: null,\n    __menuViewRadioGroup: null,\n    _urlWindow: null,\n    __infoWindow: null,\n    __viewGroup: null,\n    __selectedModelNode: null,\n    defaultUrl: null,\n    welcomeUrl: null,\n\n    __makeCommands: function () {\n      this._cmdRunSample = new qx.ui.command.Command(\"F5\");\n      this._cmdRunSample.addListener(\"execute\", this.runSample, this);\n\n      this._cmdPrevSample = new qx.ui.command.Command(\"Ctrl+Left\");\n      this._cmdPrevSample.addListener(\"execute\", this.playPrev, this);\n\n      this._cmdNextSample = new qx.ui.command.Command(\"Ctrl+Right\");\n      this._cmdNextSample.addListener(\"execute\", this.playNext, this);\n\n      this._cmdSampleInOwnWindow = new qx.ui.command.Command(\"Ctrl+N\");\n      this._cmdSampleInOwnWindow.addListener(\"execute\", this.__openWindow, this);\n    },\n\n    __openWindow: function () {\n      var sampUrl = this._iframe.getSource();\n      window.open(sampUrl, \"_blank\");\n    },\n\n    __makeToolBar: function () {\n      var bar = new qx.ui.toolbar.ToolBar();\n\n      var prevNextPart = new qx.ui.toolbar.Part();\n      bar.add(prevNextPart);\n      // -- previous navigation\n      var prevbutt = new qx.ui.toolbar.Button(this.tr(\"Previous\"), \"icon/22/actions/go-previous.png\");\n      prevbutt.addListener(\"execute\", this.playPrev, this);\n      prevbutt.setToolTipText(\"Run previous demo\");\n      prevNextPart.add(prevbutt);\n      this._prevButton = prevbutt;\n\n      // -- next navigation\n      var nextbutt = new qx.ui.toolbar.Button(this.tr(\"Next\"), \"icon/22/actions/go-next.png\");\n      nextbutt.addListener(\"execute\", this.playNext, this);\n      nextbutt.setToolTipText(\"Run next demo\");\n      prevNextPart.add(nextbutt);\n      this._nextButton = nextbutt;\n\n      // -- spin-out demo\n      var ownWinBtn = new qx.ui.toolbar.Button(this.tr(\"Own Window\"), \"icon/22/actions/edit-redo.png\");\n      ownWinBtn.addListener(\"execute\", this.__openWindow, this);\n      ownWinBtn.setToolTipText(\"Open demo in new window\");\n      this.__ownWindowButton = ownWinBtn;\n      bar.add(ownWinBtn);\n\n      // -- documentaton\n      var docButton = new qx.ui.toolbar.Button(this.tr(\"Documentation\"), \"icon/22/apps/internet-web-browser.png\");\n      docButton.addListener(\"execute\", () => {\n        window.open(\"https://www.qooxdoo.org/docs/#/cli/packages\");\n      }, this);\n      docButton.setToolTipText(\"Open package system documentation\");\n      bar.add(docButton);\n\n      // VIEWS\n      // -----------------------------------------------------\n\n      var viewPart = new qx.ui.toolbar.Part();\n      this.__viewPart = viewPart;\n      bar.addSpacer();\n      bar.add(viewPart);\n      // enable overflow handling\n      bar.setOverflowHandling(true);\n\n      // add a button for overflow handling\n      var chevron = new qx.ui.toolbar.MenuButton(null, \"icon/22/actions/media-seek-forward.png\");\n      chevron.setAppearance(\"toolbar-button\"); // hide the down arrow icon\n      bar.add(chevron);\n      bar.setOverflowIndicator(chevron);\n\n      // set priorities for overflow handling\n      bar.setRemovePriority(viewPart, 6);\n      bar.setRemovePriority(prevNextPart, 2);\n      bar.setRemovePriority(this._navPart, 1);\n\n      // add the overflow menu\n      this.__overflowMenu = new qx.ui.menu.Menu();\n      chevron.setMenu(this.__overflowMenu);\n\n      // add the listener\n      bar.addListener(\"hideItem\", this._onHideItem, this);\n      bar.addListener(\"showItem\", this._onShowItem, this);\n\n      return bar;\n    },\n\n    /**\n     * Handler for the overflow handling which will be called on hide.\n     * @param e {qx.event.type.Data} The event.\n     */\n    _onHideItem: function (e) {\n      var partItem = e.getData();\n      var menuItems = this._getMenuItems(partItem);\n      for (var i = 0, l = menuItems.length; i < l; i++) {\n        menuItems[i].setVisibility(\"visible\");\n      }\n    },\n\n\n    /**\n     * Handler for the overflow handling which will be called on show.\n     * @param e {qx.event.type.Data} The event.\n     */\n    _onShowItem: function (e) {\n      var partItem = e.getData();\n      var menuItems = this._getMenuItems(partItem);\n      for (var i = 0, l = menuItems.length; i < l; i++) {\n        menuItems[i].setVisibility(\"excluded\");\n      }\n    },\n\n\n    /**\n     * Helper for the overflow handling. It is responsible for returning a\n     * corresponding menu item for the given toolbar item.\n     *\n     * @param partItem {qx.ui.core.Widget} The toolbar item to look for.\n     * @return {qx.ui.core.Widget} The coresponding menu items.\n     */\n    _getMenuItems: function (partItem) {\n      var cachedItems = [];\n      if (partItem instanceof qx.ui.toolbar.Part) {\n        var partButtons = partItem.getChildren();\n        var separator = null;\n        var firstGroup = false;\n        var menuItems = this.__overflowMenu.getChildren();\n        if (partItem !== this.__viewPart) {\n          separator = this.__menuItemStore[partItem.toHashCode()];\n          if (!separator) {\n            separator = new qx.ui.menu.Separator();\n            this.__overflowMenu.addBefore(separator, menuItems[0]);\n            this.__menuItemStore[partItem.toHashCode()] = separator;\n          }\n          cachedItems.push(separator);\n        } else {\n          firstGroup = true;\n        }\n        for (var i = 0, l = partButtons.length; i < l; i++) {\n          if (partButtons[i].getVisibility() === \"excluded\") {\n            continue;\n          }\n          var cachedItem = this.__menuItemStore[partButtons[i].toHashCode()];\n\n          if (!cachedItem) {\n            if (partButtons[i] instanceof qx.ui.toolbar.RadioButton) {\n              cachedItem = new qx.ui.menu.RadioButton(partButtons[i].getLabel());\n              cachedItem.setToolTipText(partButtons[i].getToolTipText());\n              cachedItem.setEnabled(partButtons[i].getEnabled());\n              cachedItem.setUserData(\"value\", partButtons[i].getUserData(\"value\"));\n              cachedItem.setModel(partButtons[i].getModel());\n              partButtons[i].bind(\"enabled\", cachedItem, \"enabled\");\n\n              // sync the value's\n              partButtons[i].bind(\"value\", cachedItem, \"value\");\n              cachedItem.bind(\"value\", partButtons[i], \"value\");\n\n              if (!this.__menuViewRadioGroup) {\n                this.__menuViewRadioGroup = new qx.ui.form.RadioGroup();\n                this.__menuViewRadioGroup.setAllowEmptySelection(true);\n              }\n              this.__menuViewRadioGroup.add(cachedItem);\n            } else if (partButtons[i] instanceof qx.ui.toolbar.MenuButton) {\n              cachedItem = new qx.ui.menu.Button(partButtons[i].getLabel().translate(), partButtons[i].getIcon(), partButtons[i].getCommand(), partButtons[i].getMenu());\n              cachedItem.setToolTipText(partButtons[i].getToolTipText());\n              cachedItem.setEnabled(partButtons[i].getEnabled());\n              partButtons[i].bind(\"enabled\", cachedItem, \"enabled\");\n            } else if (partButtons[i] instanceof qx.ui.toolbar.Button) {\n              cachedItem = new qx.ui.menu.Button(partButtons[i].getLabel().translate(), partButtons[i].getIcon());\n              cachedItem.getChildControl(\"label\", false).setRich(true);\n              cachedItem.setTextColor(partButtons[i].getTextColor());\n              cachedItem.setToolTipText(partButtons[i].getToolTipText());\n              cachedItem.setEnabled(partButtons[i].getEnabled());\n              partButtons[i].bind(\"enabled\", cachedItem, \"enabled\");\n              var listeners = qx.event.Registration.getManager(partButtons[i]).getListeners(partButtons[i], \"execute\");\n              if (listeners && listeners.length > 0) {\n                for (var j = 0, k = listeners.length; j < k; j++) {\n                  cachedItem.addListener(\"execute\", qx.lang.Function.bind(listeners[j].handler, listeners[j].context));\n                }\n              }\n            } else if (partButtons[i] instanceof qx.ui.toolbar.CheckBox) {\n              cachedItem = new qx.ui.menu.CheckBox(partButtons[i].getLabel());\n              cachedItem.setToolTipText(partButtons[i].getToolTipText());\n              cachedItem.setEnabled(partButtons[i].getEnabled());\n              partButtons[i].bind(\"enabled\", cachedItem, \"enabled\");\n            } else {\n              cachedItem = new qx.ui.menu.Separator();\n            }\n            if (firstGroup) {\n              this.__overflowMenu.add(cachedItem);\n            } else {\n              this.__overflowMenu.addBefore(cachedItem, separator);\n            }\n            this.__menuItemStore[partButtons[i].toHashCode()] = cachedItem;\n          }\n          cachedItems.push(cachedItem);\n        }\n      }\n\n      return cachedItems;\n    },\n\n    __makeDemoView: function () {\n      var iframe = new qx.ui.embed.Iframe().set({\n        nativeContextMenu: true\n      });\n      iframe.addListener(\"load\", this.__onIframeLoaded, this);\n      this._iframe = iframe;\n\n      return iframe;\n    },\n\n    /**\n     * Tree View in Left Pane\n     * - only make root node; rest will be filled when iframe has loaded (with\n     *   leftReloadTree)\n     *\n     * @return {var} TODOC\n     */\n    __makeTree: function () {\n      var tree1 = new qx.ui.tree.Tree();\n      var root = new qx.ui.tree.TreeFolder(\"Packages\");\n      tree1.setAppearance(\"demo-tree\");\n      tree1.setRoot(root);\n      //tree1.setSelection([root]);\n\n      this.tree = this.widgets[\"treeview.flat\"] = tree1;\n\n      tree1.addListener(\"changeSelection\", this.__onTreeChangeSelection, this);\n      tree1.addListener(\"tap\", function (e) {\n        qx.event.Timer.once(this.runSample, this, 50);\n      }, this);\n\n      return tree1;\n    },\n\n\n    __makeUrlMenu: function () {\n      var urlWindow = new qx.ui.window.Window(this.tr(\"Package Link\"), \"icon/22/mimetypes/text-html.png\");\n      urlWindow.setLayout(new qx.ui.layout.VBox(10));\n      urlWindow.setAllowMaximize(false);\n      urlWindow.setAllowMinimize(false);\n      var urlLabel = new qx.ui.basic.Label(\"\");\n      urlLabel.setSelectable(true);\n      urlLabel.setNativeContextMenu(true);\n      urlWindow.add(urlLabel);\n      this._urlWindow = urlWindow;\n      var left = Math.ceil((qx.bom.Viewport.getWidth() / 2) - 250);\n      if (left < 0) {\n        left = 0;\n      }\n      var top = Math.ceil((qx.bom.Viewport.getHeight() / 2) - 25);\n      if (top < 0) {\n        top = 0;\n      }\n      urlWindow.moveTo(left, top);\n      this.getApplicationRoot().add(urlWindow);\n\n      var menu = new qx.ui.menu.Menu();\n      var copyButton = new qx.ui.menu.Button(this.tr(\"Get Demo Link\"), \"icon/22/mimetypes/text-html.png\");\n      copyButton.addListener(\"execute\", function (e) {\n        var treeNode = this.tree.getSelection()[0];\n        var modelNode = treeNode.getUserData(\"modelLink\");\n        var demoName = this.tests.handler.getFullName(modelNode);\n        if (qx.core.Environment.get(\"qx.contrib\")) {\n          demoName = demoName.replace(/\\|/g, \"/\");\n        } else {\n          demoName = demoName.replace(\".\", \"~\");\n        }\n        var fullUrl = location.protocol + \"//\" + location.host + location.pathname + \"#\" + encodeURIComponent(demoName);\n        this._urlWindow.getChildren()[0].setValue(fullUrl);\n        this._urlWindow.open();\n      }, this);\n      menu.add(copyButton);\n      this._tree.setContextMenu(menu);\n    },\n\n\n    // ------------------------------------------------------------------------\n    //   EVENT HANDLER\n    // ------------------------------------------------------------------------\n\n    __onTreeChangeSelection: function (e) {\n      const treeNode = this.tree.getSelection()[0];\n      const modelNode = treeNode.getUserData(\"modelLink\");\n      this.__selectedModelNode = modelNode;\n    },\n\n\n    /**\n     * @param e {Event}\n     * @return {void}\n     */\n    leftReloadTree: function (e) {\n      this._sampleToTreeNodeMap = {};\n      var _sampleToTreeNodeMap = this._sampleToTreeNodeMap;\n      var _initialNode = null;\n\n      // set a section to open initially\n      var state = this._history.getState().replace(/~/g, \"/\");\n\n      let icons = this.self(arguments).icons;\n\n      // use tree struct\n      /**\n       * create widget tree from model\n       *\n       * @param widgetR {qx.ui.tree.Tree}    [In/Out]\n       *        widget root under which the widget tree will be built\n       * @param modelR  {qxl.packagebrowser.Tree} [In]\n       *        model root for the tree from which the widgets representation\n       *        will be built\n       */\n      const buildSubTree = (widgetR, modelR) => {\n        var children = modelR.getChildren();\n        var t;\n\n        for (var i = 0; i < children.length; i++) {\n          let currNode = children[i];\n          let fullPath;\n\n          if (currNode.hasChildren()) {\n            t = new qx.ui.tree.TreeFolder(currNode.label);\n            t.setUserData(\"filled\", false);\n            t.setUserData(\"node\", currNode);\n\n            // tags\n            let tags = [];\n            if (currNode.description) {\n              tags.push(currNode.description);\n            }\n\n            if (currNode.info.description) {\n              tags.push(currNode.info.description);\n            }\n\n            let keywords = currNode.info.keywords;\n            if (qx.lang.Type.isArray(keywords) && keywords.length) {\n              tags = tags.concat(keywords);\n            }\n\n            let authors = currNode.info.authors;\n            if (qx.lang.Type.isArray(authors) && authors.length) {\n              tags = tags.concat(authors);\n            }\n\n            t.setUserData(\"tags\", tags);\n            buildSubTree(t, t.getUserData(\"node\"));\n          } else {\n            t = new qx.ui.tree.TreeFile(currNode.label);\n            if (currNode.type !== \"demo\") {\n              fullPath = currNode.pwd().slice(1).concat([currNode.type]).join(\"/\");\n            }\n          }\n          fullPath = fullPath || currNode.pwd().slice(1).concat([currNode.label]).join(\"/\");\n          _sampleToTreeNodeMap[fullPath] = t;\n          if (fullPath === state) {\n            _initialNode = t;\n            if (t instanceof qx.ui.tree.TreeFolder) {\n              t.setOpen(true);\n            }\n          }\n\n          // set icon\n          let type = currNode.data && currNode.data.problems ? \"problems\" : currNode.type;\n          if (type && icons[type]) {\n            t.setIcon(icons[type]);\n          }\n\n          // make connections\n          widgetR.add(t);\n          t.setUserData(\"modelLink\", currNode);\n          currNode.widgetLinkFull = t;\n        }\n      };\n\n      // -- Main --------------------------------\n      var ttree = this.tests.handler.ttree;\n\n      // Handle current Tree Selection and Content\n      this.tree.setUserData(\"modelLink\", ttree); // link top level widgets and model\n\n      this.tree.getRoot().setOpen(true);\n      buildSubTree(this.tree.getRoot(), ttree);\n\n      if (_initialNode !== null) {\n        this.updateIframe(_initialNode);\n      } else {\n        this.tree.setSelection([this.tree.getRoot()]);\n      }\n    },\n\n    runSample: function() {\n      //if (this.__selectedModelNode) {\n        this.updateIframe(this.__selectedModelNode);\n      //} else {\n        //this.playNext();\n      //}\n    },\n\n    async updateIframe(value) {\n      if (value === this._currentSample) {\n        return;\n      }\n\n      if (!value) {\n        value = this.welcomeUrl;\n        this._history.setState(\"\");\n      }\n\n      let treeNode;\n      let modelNode;\n      let state;\n      let url;\n      let html;\n\n      if (typeof value == \"string\") {\n        if (value.startsWith(\"http\")) {\n          url = state = value;\n        } else {\n          state = value;\n          treeNode = this._sampleToTreeNodeMap[value];\n          if (treeNode) {\n            treeNode.getTree().setSelection([treeNode]);\n          }\n        }\n      } else if (value instanceof qx.ui.tree.core.AbstractTreeItem) {\n        treeNode = value;\n      } else if (value instanceof qxl.packagebrowser.Tree) {\n        modelNode = value;\n      }\n\n      if (treeNode) {\n        modelNode = treeNode.getUserData(\"modelLink\");\n        if (!modelNode) {\n          this.error(\"Could not find model node for \" + value + \" from tree node\");\n          return;\n        }\n      }\n\n      if (modelNode) {\n        url = this.defaultUrl;\n        state = state || modelNode.pwd().slice(1).concat([modelNode.type]).join(\"/\");\n        switch (modelNode.type) {\n          case \"demo\":\n            if (modelNode.hasChildren()) {\n              // demo parent (without url)\n              html = this.__getApplicationsHtml(modelNode.children);\n            } else {\n              // demo child (with url)\n              url = modelNode.url;\n              state = modelNode.pwd().slice(1).concat([modelNode.label]).join(\"/\");\n            }\n            break;\n          case \"library\":\n            html = this.__getLibraryInfoHtml(modelNode);\n            break;\n          case \"readme\":\n            html = await this.__getReadmeHtml(modelNode.uri);\n            break;\n          case \"releases\":\n            html = await this.__getReleasesHtml(modelNode, treeNode);\n            break;\n          case \"problems\":\n            html = this.__getProblemsHtml(modelNode);\n            break;\n          default: {\n            let children = modelNode.getChildren();\n            if (Array.isArray(children) && children.length && children[0].type === \"library\") {\n              /* eslint-disable-next-line consistent-return */\n              return this.updateIframe(children[0]);\n            }\n            state = modelNode.pwd().slice(1).concat([modelNode.label]).join(\"/\");\n            url = this.welcomeUrl;\n          }\n        }\n      } else if (!url) {\n        url = this.welcomeUrl;\n      }\n\n      if (state && state !== this.defaultUrl && state !== this.welcomeUrl) {\n        state = state.replace(/\\//g, \"~\");\n        this._history.setState(state);\n      }\n\n      // if we have a cross-domain url, we cannot open it in the iFrame.\n      // create some html with a link instead.\n      if (url && !(url.startsWith(location.origin) || url.startsWith(qx.$$appRoot))) {\n        html = this.__getOpenLinkHtml(url);\n      }\n\n      // write html instead of loading from remote url\n      if (html) {\n        this.__ownWindowButton.setEnabled(false);\n        if (this._iframe.getSource() !== this.defaultUrl) {\n          await this.__loadIframe(this.defaultUrl);\n        }\n        this._iframe.getDocument().body.innerHTML = html;\n      } else {\n        // Toggle menu buttons\n        if (url === this.defaultUrl || url === this.welcomeUrl) {\n          this.__ownWindowButton.setEnabled(false);\n          this.disableMenuButtons();\n        } else {\n          this.__ownWindowButton.setEnabled(true);\n          this.enableMenuButtons();\n        }\n        if (this._iframe.getSource() !== url) {\n          await this.__loadIframe(url);\n        }\n      }\n\n      this._currentSample = value;\n      this._currentSampleUrl = url;\n    },\n\n    /**\n     * Loads an iframe asynchronously and returns a promise that resolves to\n     * the iframe's window object once it is loaded\n     * @param url\n     * @return {Promise<window>}\n     * @private\n     */\n    async __loadIframe(url) {\n      return new Promise((resolve, reject) => {\n        if (url !== this.defaultUrl) {\n          qxl.packagebrowser.Popup.getInstance().useIcon(\"waiting\").display(`Loading, please wait... `);\n        }\n        this._iframe.addListener(\"load\", () => {\n          qx.event.Timer.once(() => {\n            qxl.packagebrowser.Popup.getInstance().hide();\n            resolve(this._iframe.getWindow());\n          }, this, 500);\n        });\n        this._iframe.setSource(url);\n      });\n    },\n\n    __getLibraryInfoHtml(modelNode) {\n      const lib = modelNode.manifest;\n      const req = lib.requires || {};\n      const repo_url = \"https://github.com/\" + modelNode.uri.split(/\\//).slice(0, 2).join(\"/\");\n      const display = v => v ? \"\" : \"display:none\";\n\n      /**\n       * @param {...any} args\n       */\n      function createTableRow(...args) {\n        return \"<tr>\" + args.map(arg => `<td>${arg}</td>`).join(\"\") + \"</tr>\";\n      }\n\n      /**\n       * @param href\n       * @param linktext\n       * @param target\n       */\n      function createAnchor(href, linktext, target=\"_blank\") {\n        return `<a href=\"${href}\" ${target ? \"target=\\\"\" + target + \"\\\"\" : \"\"}>${linktext || href}</a>`;\n      }\n\n      const dependencies = Object.entries(req).map(([pkg_uri, range]) => {\n        if (!pkg_uri.startsWith(\"@\") && !pkg_uri.startsWith(\"qooxdoo-\")) {\n          return createTableRow(createAnchor(`javascript:void(top.location.hash='${pkg_uri.replace(\"/\", \"~\")}~library')`, pkg_uri), range);\n        }\n        return null;\n      }).filter(v => Boolean(v));\n      let html = `\n        <h1>${lib.info.name}</h1>\n        <h2 style=\"font-weight:bold;${display(lib.info.summary)}\">${lib.info.summary}</h2>\n        <table>\n          ${createTableRow(\"Version:\", lib.info.version)}\n          ${createTableRow(\"Namespace:\", lib.provides.namespace)}\n          ${createTableRow(\"Authors:\", this.__getAuthorsHtml(lib.info.authors))}\n          ${createTableRow(\"Homepage:\", createAnchor(lib.info.homepage))}\n          ${createTableRow(\"Repository:\", createAnchor(repo_url))}\n          ${createTableRow(\"Issues:\", createAnchor(this.__getNewIssueUrl(modelNode.uri), \"List of issues\") + \" | \" + createAnchor(this.__getNewIssueUrl(modelNode.uri, true), \"Create new issue\"))}\n          ${createTableRow(\"Keywords:\", this.__getKeywordssHtml(lib.info.keywords || []))}\n        </table>\n        <h2 style=\"${display(lib.info.description)}\">Description</h2>\n        <p style=\"${display(lib.info.description)}\">${lib.info.description}</p>\n        <h2>Installation</h2>\n        <p><code>qx package install ${modelNode.uri}</code></p>\n        <h2>Dependencies</h2>\n        <table>\n          ${createTableRow(\"qooxdoo version:\", req[\"@qooxdoo/framework\"] || req[\"qooxdoo-sdk\"])}\n          ${createTableRow(\"Compiler version:\", req[\"@qooxdoo/compiler\"] || req[\"qooxdoo-compiler\"])}\n          ${dependencies.join(\"\\n\")}\n        </table>  \n       `;\n      return html;\n    },\n\n    __getOpenLinkHtml(url) {\n      return `<p>Click on the following link to open it in a new window: <a target=\"_blank\" href=\"${url}\">${url}</a>`;\n    },\n\n    __getAuthorsHtml(authors) {\n      return authors.map(author => {\n        let html = `${author.name}`;\n        if (author.githubUser) {\n          let img_src = qx.util.ResourceManager.getInstance().toUri(\"qxl/packagebrowser/icon/github-16x16.png\");\n          html += ` <img src=\"${img_src}\" /><a href=\"https://github.com/${author.githubUser}\">@${author.githubUser}</a>`;\n        }\n        return html;\n      }).join(\", \");\n    },\n\n    __getKeywordssHtml(keywords) {\n      return keywords.join(\", \");\n    },\n\n    __getNewIssueUrl(uri, newIssue=false) {\n      uri = uri.split(\"/\").slice(0, 2).join(\"/\");\n      return `https://github.com/${uri}/issues${newIssue ? \"/new\" : \"\"}`;\n    },\n\n    /**\n     * @param {qxl.packagebrowser.Tree} modelNode\n     * @return {string}\n     * @private\n     * @ignore(top)\n     */\n    __getProblemsHtml(modelNode) {\n      let {data:{compilation_log}, manifest:{info, requires={}}} = modelNode;\n      const lineStartsWith = [\n        \"One or more libraries\",\n        \"Writing\",\n        \"Minifying\",\n        \"Everything is up-to-date\"\n      ];\n      let log =\n        compilation_log\n          .split(\"\\n\")\n          .filter(line => Boolean(line.trim()))\n          .filter(line => !lineStartsWith.some(string => line.startsWith(string)))\n          .join(\"\\n\");\n      let migrateMsg = \"\";\n      const migrateSignal = \"Migration completed.\\n\";\n      if (log.includes(migrateSignal)) {\n        migrateMsg = `<p class=\"notice\">The package must be migrated to a new compiler version.  \n          The package author should run <span class=\"code\">qx package migrate</span> \n          in the root folder of this package, follow the instructions, and \n          release a new version of the package.</p>`;\n        log = log.replace(migrateSignal, \"\");\n      }\n      const newIssueBody = [\n        `Compiling package '${info.name}' with the following environment:`, \"\",\n        ` - qooxdoo version: ${requires[\"@qooxdoo/framework\"]}`,\n        ` - compiler: ${requires[\"@qooxdoo/compiler\"]}`, \"\",\n        `results in the following warnings/errors:`, \"```\", log, \"```\",\n        `Please visit https://www.qooxdoo.org/qxl.packagebrowser/${top.location.hash} for more information how to fix the problems.`\n      ].join(\"\\n\");\n      const newPackageIssueUrl =\n        this.__getNewIssueUrl(modelNode.uri, true) +\n        \"?title=\" + encodeURIComponent(\"Compilation problems\") +\n        \"&body=\" + encodeURIComponent(newIssueBody);\n      const newCompilerIssueUrl =\n        `https://github.com/qooxdoo/qooxdoo-compiler/issues/new` +\n        \"?title=\" + encodeURIComponent(\"Compilation problems\") +\n        \"&body=\" + encodeURIComponent(newIssueBody);\n      let html = `<h1>Compilation problems</h1>\n        ${migrateMsg}\n        <p>During the compilation of this package, the following warnings or errors have been logged.\n        The messages do not necessarily imply that the package is broken.\n        They might point to problems of the compiled library or might be\n        the symptom of an unresolved bug of the compiler.</p> \n        <pre>${log}</pre>`;\n\n      const explanations = [\n        {\n          regex: /^([^:]+): (.+) Unresolved use of symbol (.+)$/,\n          description:\n            `The compiler cannot find a reference for the given symbol <span class=\"code\">$3</span>. \n            If this does not indicate a bug, it can usually fixed with adding <span class=\"code\">@ignore($3)</span> \n            in class <span class=\"code\">$1</span>.`\n        },\n        {\n          regex: /^Cannot find path (.+) required by library (.+)$/,\n          description:\n            `The <span class=\"code\">Manifest.json</span> file of the class \n            <span class=\"code\">$2</span> declares to provide a path \n            <span class=\"code\">$1</span>, which does not exist. \n            If no such path is needed, consider removing the entry in Manifest.json.`\n        },\n        {\n          regex: /^(.*)Error validating data for ([^:]+): (.+)$/,\n          description:\n            `The file <span class=\"code\">$2</span> is not valid according to \n             <a target=\"_blank\" href=\"https://github.com/qooxdoo/qooxdoo-compiler/tree/master/source/resource/qx/tool/schema\">\n             the current JSON Schema</a> \n             (see documentation <a href=\"http://www.qooxdoo.org/docs/#/configuration/overview?id=configuration-files\" target=\"_blank\">\n             here</a>). Validation errors are: <span class=\"code\">$3</span>.`\n        }\n      ];\n      const explainMessages =\n        compilation_log\n          .split(\"\\n\")\n          .reduce((result, line) => {\n            let explanation = explanations.find(expl => line.match(expl.regex));\n            if (explanation) {\n              result.push(line.replace(explanation.regex, explanation.description));\n            }\n            return result;\n          }, []);\n      if (explainMessages.length) {\n        html += `<h2>Explanation</h2>\n        <ul><li>${explainMessages.join(\"</li><li>\")}</li></ul>`;\n      }\n      html += `<h2>What you can do</h2>\n      <ul>\n        <li><a target=\"_blank\" href=\"${newPackageIssueUrl}\">Create an issue in the package repo</a>;</li>    \n        <li>If you think that a compiler bug is concerned, <a target=\"_blank\" href=\"${newCompilerIssueUrl}\">create an issue in the compiler repo</a>;</li>\n        <li>If the problem concerns a dependency of this package, try upgrading the dependent package to its most recent compatible version; if that doesn't help, contact the package author;</li>\n        <li>Or, if you are unsure, <a target=\"_blank\" href=\"https://gitter.im/qooxdoo/qooxdoo\">report the problems on Gitter</a>.</li>\n      </ul>`;\n      return html;\n    },\n\n    __getApplicationsHtml(children) {\n      const appsHtml = children.map(childNode => {\n          const hash = childNode.pwd().slice(1).concat([childNode.label]).join(\"~\");\n          return `<a href=\"javascript:void(top.location.hash='${hash}')\"><h2>${childNode.label}</h2></a>` +\n            (childNode.description ? `<p>${childNode.description}</p>` : \"\");\n        }\n      ).join(\"\\n\");\n      return `<h1>Demo Applications</h1>\n      <p>This package contains the following executable applications:</p>\n      ${appsHtml}`;\n    },\n\n    /**\n     *\n     * @param uri {String} The GitHub uri\n     * @return {Promise<string|*|string>}\n     * @private\n     * @ignore(fetch)\n     * @ignore(showdown)\n     */\n    __getReadmeHtml: async function (uri) {\n      let apiUrl = `https://api.github.com/repos/${uri}/readme`;\n      qxl.packagebrowser.Popup.getInstance().useIcon(\"waiting\").display(`Loading, please wait... `);\n      try {\n        let result = await (await fetch(apiUrl)).json();\n        if (result.content) {\n          let markdown = atob(result.content);\n          let converter = new showdown.Converter();\n          return converter\n            .makeHtml(markdown)\n            .replace(/(href|src)=\"([^h][^t][^t][^p])/g, (match, attr, urlFragment) => {\n              let urlPrefix = attr === \"href\" ? `https://github.com/${uri}/tree/master` : `https://raw.githubusercontent.com/${uri}/master`;\n              return `target=\"_blank\" ${attr}=\"${urlPrefix}/${urlFragment}`;\n            });\n        }\n        return `<p>The repository does not have a README file.`;\n      } catch (e) {\n        return `<p>Error retrieving ${apiUrl}: ${e.message}.</p>`;\n      } finally {\n        qxl.packagebrowser.Popup.getInstance().hide();\n      }\n    },\n\n    async __getReleasesHtml(modelNode, treeNode) {\n      let uri = modelNode.uri.split(\"/\").slice(0, 2).join(\"/\");\n      let apiUrl = `https://api.github.com/repos/${uri}/releases`;\n      qxl.packagebrowser.Popup.getInstance().useIcon(\"waiting\").display(`Loading, please wait... `);\n      try {\n        const oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds\n        const today = new Date();\n        let html=\"\";\n        let result = await (await fetch(apiUrl)).json();\n        if (result.length) {\n          html = `<h1>Releases</h1>`;\n          html += result.map(release => {\n            if (release.draft) {\n              return null;\n            }\n            const datePublished = new Date(release.published_at);\n            const daysSincePublished = Math.round(Math.abs((today.getTime() - datePublished.getTime())/(oneDay)));\n            if (treeNode && daysSincePublished < 7) {\n              treeNode.setIcon(\"qx/icon/Tango/16/status/mail-unread.png\");\n              treeNode.setLabel(\"New release available\");\n            }\n            const tagHtml = release.tag_name !== release.name ? `Tag name: ${release.tag_name}. ` : \"\";\n            const titleSuffixes = [];\n            if (release.prerelease) {\n              titleSuffixes.push(\"prerelease\");\n            }\n            if (release.tag_name === modelNode.latestCompatible) {\n              titleSuffixes.push(\"latest compatible release\");\n            }\n            if (release.tag_name === modelNode.latestVersion) {\n              titleSuffixes.push(\"current version\");\n            }\n            let div = document.createElement(\"div\");\n            div.innerText = release.body;\n            let description = div.innerHTML;\n            return `\n              <h2><a href=\"${release.html_url}\" target=\"_blank\">${release.name} ${titleSuffixes.length ? (\"(\" + titleSuffixes.join(\", \") + \")\") : \"\"}</a></h2>\n              <p style=\"font-weight: bold\">${tagHtml}Published at ${datePublished.toLocaleDateString()}, ${datePublished.toLocaleTimeString()} (${daysSincePublished} days ago)</p>\n              <p>${description}</p>\n            `;\n          }).filter(release => Boolean(release)).join(\"\\n\");\n        }\n        return html;\n      } catch (e) {\n        return `<p>Error retrieving ${apiUrl}: ${e.message}.</p>`;\n      } finally {\n        qxl.packagebrowser.Popup.getInstance().hide();\n      }\n    },\n\n    __onIframeLoaded: function () {\n      // var fwindow = this._iframe.getWindow();\n      // var furl = this._iframe.getSource();\n      // if (furl != null && furl !== this.defaultUrl) {\n      //\n      // }\n    },\n\n\n    // ------------------------------------------------------------------------\n    //   MISC HELPERS\n    // ------------------------------------------------------------------------\n\n    /**\n     * This method filters the folders in the tree.\n     * @param term {String} The search term.\n     */\n    filter: function (term) {\n      var searchRegExp = new RegExp(\"^.*\" + term + \".*\", \"ig\");\n      var items = this._tree.getRoot().getItems(true, true);\n\n      for (let i = 0; i < items.length; i++) {\n        var folder = items[i];\n        var parent = folder.getParent();\n\n        // check for the tags\n        var tags = folder.getUserData(\"tags\");\n        var inTags = false;\n        if (tags !== null) {\n          for (let j = 0; j < tags.length; j++) {\n            inTags = Boolean(tags[j].match(searchRegExp));\n            if (inTags) {\n              break;\n            }\n          }\n        }\n\n        if ((inTags || (folder.getLabel().search(searchRegExp) !== -1) || (parent.getLabel().search(searchRegExp) !== -1))) {\n          folder.setOpen(false);\n          folder.setUserData(\"show\", true);\n          folder.show();\n          while (parent) {\n            parent.setOpen(true);\n            parent.show();\n            parent = parent.getParent();\n          }\n        } else {\n          folder.setUserData(\"show\", false);\n          if (!parent.getUserData(\"show\")) {\n            folder.exclude();\n          }\n        }\n      }\n\n      // special case for the empty string\n      if (term === \"\") {\n        var folders = this._tree.getRoot().getItems(false, true);\n        var selection = this._tree.getSelection();\n\n        // close all folders\n        for (let i = 0; i < folders.length; i++) {\n          // don't close the current selected\n          if (folders[i] === selection[0] || folders[i] === selection[0].getParent()) {\n            continue;\n          }\n          folders[i].setOpen(false);\n        }\n      }\n    },\n\n    /**\n     * TODOC\n     *\n     * @param url {var} TODOC\n     * @return {void}\n     */\n    dataLoader: function (url) {\n      var req = new qx.io.request.Xhr(url);\n      req.setTimeout(180000);\n\n      /**\n       * TODOC\n       *\n       * @param evt {var} TODOC\n       * @lint ignoreDeprecated(alert, eval)\n       */\n      req.addListener(\"success\", function (evt) {\n        var content = evt.getTarget().getResponse();\n        if (!content) {\n        /* eslint-disable-next-line no-alert */\n        alert(\"Failed to load package data\");\n          return;\n        }\n        /* eslint-disable-next-line no-eval */\n        let treeData = eval(content);\n\n        // give the browser a chance to update its UI before doing more\n        qx.event.Timer.once(function () {\n          this.tests.handler = new qxl.packagebrowser.TreeDataHandler(treeData);\n          this.leftReloadTree();\n\n          // read initial state\n          var state = this._history.getState().replace(/\\~/g, \"/\");\n          if (state) {\n            if (state.startsWith(\"filter/\")) {\n              qx.event.Timer.once(() => {\n                this._searchTextField.setValue(state.slice(7));\n              }, null, 1000);\n            } else {\n              this.updateIframe(state);\n            }\n          } else {\n            this.updateIframe(this.welcomeUrl);\n          }\n        }, this, 0);\n      }, this);\n\n      req.addListener(\"fail\", function (evt) {\n        this.error(\"Couldn't load file: \" + url);\n      }, this);\n\n      req.send();\n    },\n\n\n    /**\n     * Plays the sample preceding the currently selected tree node\n     *\n     * @param e {Event} TODOC\n     * @return {void}\n     */\n    playPrev: function (e) {\n      var currSamp = this.tree.getSelection()[0]; // widget\n\n      if (currSamp) {\n        var otherSamp = this.tree.getPreviousNodeOf(currSamp, false);\n        if (!otherSamp || otherSamp === this.tree.getRoot()) {\n          return;\n        }\n\n        while (otherSamp.isVisible && !otherSamp.isVisible()) {\n          otherSamp = this.tree.getPreviousNodeOf(otherSamp, false);\n        }\n\n        if (otherSamp.getParent() === this.tree.getRoot()) {\n          // otherSamp is the parent\n          var candidate = this.tree.getPreviousNodeOf(otherSamp, false);\n          while (candidate.isVisible && !candidate.isVisible()) {\n            candidate = this.tree.getPreviousNodeOf(candidate, false);\n          }\n          if (candidate.getParent() === this.tree.getRoot()) {\n            candidate.setOpen(true);\n            var candidate2 = this.tree.getPreviousNodeOf(otherSamp, false);\n            while (candidate2.isVisible && !candidate2.isVisible()) {\n              candidate2 = this.tree.getPreviousNodeOf(candidate2, false);\n            }\n            if (candidate !== candidate2) {\n              otherSamp = candidate2;\n            }\n          } else {\n            otherSamp = candidate;\n          }\n        }\n\n        if (otherSamp && otherSamp !== currSamp) {\n          this.tree.setSelection([otherSamp]);\n          this.runSample();\n        }\n      }\n    },\n\n\n    /**\n     * Plays the sample following the currently selected tree node\n     *\n     * @param e {Event} TODOC\n     * @return {void}\n     *\n     * @ignore(getChildren)\n     */\n    playNext: function (e) {\n      this._nextButton.setEnabled(true);\n      this._prevButton.setEnabled(true);\n      var currSamp = this.tree.getSelection()[0]; // widget\n\n      if (currSamp) {\n        var otherSamp = this.tree.getNextNodeOf(currSamp);\n        if (!otherSamp) {\n          return;\n        }\n\n        if (otherSamp.getParent() === this.tree.getRoot()) {\n          otherSamp.setOpen(true);\n          otherSamp = this.tree.getNextNodeOf(otherSamp);\n        }\n\n        if (!otherSamp) {\n          return;\n        }\n\n        while (!otherSamp.isVisible()) {\n          var candidate = this.tree.getNextNodeOf(otherSamp);\n          if (!candidate) {\n            // reached the last item\n            return;\n          }\n          if (candidate.getParent() === this.tree.getRoot()) {\n            // found a folder\n            otherSamp.setOpen(true);\n            candidate = this.tree.getNextNodeOf(candidate);\n          }\n          otherSamp = candidate;\n        }\n        if (otherSamp) {\n          this.tree.setSelection([otherSamp]);\n          this.runSample();\n        }\n      }\n    },\n\n    /**\n     * Diables all menu buttons which functionality only works with a selected\n     * demo.\n     */\n    disableMenuButtons: function () {\n      var elements = this.__menuElements;\n      for (var i = 0; i < elements.length; i++) {\n        elements[i].setEnabled(false);\n      }\n    },\n\n    /**\n     * Enables all menu buttons which functionality only works with a selected\n     * demo.\n     */\n    enableMenuButtons: function () {\n      var elements = this.__menuElements;\n      for (var i = 0; i < elements.length; i++) {\n        elements[i].setEnabled(true);\n      }\n    },\n\n\n    /**\n     * Creates the application header.\n     */\n    _createHeader: function () {\n      var layout = new qx.ui.layout.HBox();\n      var header = new qx.ui.container.Composite(layout);\n      header.setAppearance(\"app-header\");\n\n      var title = new qx.ui.basic.Label(\"Package Browser\");\n      var version = new qxl.versionlabel.VersionLabel();\n      version.setFont(\"default\");\n\n      header.add(title);\n      header.add(new qx.ui.core.Spacer(), {flex: 1});\n      header.add(version);\n\n      return header;\n    }\n\n  },\n\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct: function () {\n    this.widgets = this.tests = this._sampleToTreeNodeMap = this.tree = this.logelem = null;\n    this._disposeObjects(\"mainsplit\", \"tree1\", \"left\", \"toolbar\", \"f1\", \"f2\", \"_history\", \"logappender\", \"_cmdRunSample\", \"_cmdPrevSample\", \"_cmdNextSample\", \"_cmdSampleInOwnWindow\", \"_navPart\", \"__ownWindowButton\", \"__viewPart\", \"__viewGroup\", \"__menuBar\", \"_infosplit\", \"_searchTextField\", \"_tree\", \"_iframe\", \"_demoView\", \"__menuElements\", \"__logSync\", \"_leftComposite\", \"_urlWindow\", \"_nextButton\", \"_prevButton\", \"__menuItemStore\", \"__overflowMenu\");\n  }\n});\n"
  ]
}